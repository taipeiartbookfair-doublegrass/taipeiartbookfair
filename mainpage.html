<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>草率季 Taipei Art Book Fair</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=BioRhyme+Expanded:wght@200;300;400;700;800&family=Libre+Franklin:ital,wght@0,100..900;1,100..900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="shortcut icon" href="image/icon-1.ico" />

    <link rel="stylesheet" href="css/mainpage.css" />
    <link rel="stylesheet" href="css/font.css" />
    <link rel="stylesheet" href="css/exhibitors.css" />
    <script src="js/exhibitors-list.js"></script>

     <!-- Store Modal -->
    <div id="storeModal" class="store-modal">
      <div class="store-modal-content">
        <span class="store-modal-close">&times;</span>
        <div class="store-modal-body">
          <img src="image/web-book.gif" alt="NMHW" class="store-modal-image">
        </div>
      </div>
    </div>

    <!-- Google tag (gtag.js) -->
     <script
     async
     src="https://www.googletagmanager.com/gtag/js?id=G-EPSXJPDH6L"
   ></script>
   <script>
     window.dataLayer = window.dataLayer || [];
     function gtag() {
       dataLayer.push(arguments);
     }
     gtag("js", new Date());

     gtag("config", "G-EPSXJPDH6L");
   </script>
  </head>
  <body>
    <!-- 照片轉起來！Hot! -->
    <div class="rotata" id="rotata">
      <!-- automation!! -->
    </div>

    <!-- 主要內容容器 -->
    <div class="main-container">
      <!-- 右上角控制區域 -->
    <div class="top-controls">
      <div class="top-controls-content">
        <!-- <button id="language-toggle" class="language-btn">English</button> -->
        <a href="login.html" class="exhibitor-login-btn">EXHIBITOR LOGIN</a>
      </div>
    </div>

    <!-- 主標題區域 - 可滾動 -->
    <!-- <div class="main-title-section">
      <div class="container">
        <div class="main-title-area">
        </div>
      </div>
    </div> -->
    
    <!-- 導航項目區域 - Sticky -->
    <nav class="nav-items-area sticky-nav">
      <div class="container">
        <ul class="nav-menu">
          <li><a href="index.html">HOME</a></li>
          <li>
            <a
              href="https://nmhw.taipeiartbookfair.com/"
              target="_blank"
              id="nav-shop"
              >STORE</a
            >
          </li>
          <!-- <li><a href="#exhibitors" id="nav-exhibitors">ZINE WALL</a></li>
          <li><a href="#exhibitors" id="nav-exhibitors">ARCHIVE</a></li> -->
          <li><a href="about.html" id="nav-about">ABOUT</a></li>
          <!-- <li><a href="#about" id="nav-about">FAQ</a></li> -->
        </ul>
      </div>
    </nav>


    <!-- start of monopoly-style layout -->
    <div class="monopoly-board">
      <!-- 左方書籍邊框 -->
      <div class="book-border book-border-left">
        <h3 class="zine-wall-title">
          STORE HIGHLIGHT:
        </h3>
        
        <!-- 商店功能說明文字 -->
        <div class="store-explanation">
          ↓ 將滑鼠懸停在書籍上可查看詳細資訊，點擊後將進入商店購買頁面。
            Hover over the books to view detailed information, and click the bookto enter the store page.
        </div>
        
        <div class="book-item"></div>
        <div class="book-item"></div>
        <div class="book-item"></div>
      </div>

      <!-- 中央主要內容區域 -->
      <div class="main-content">
        <!-- 上層內容區域 - 海報和PROGRAMS水平排列 -->
        <div class="top-content-wrapper">
          <!-- 海報整體區域 -->
          <div class="poster-area">
          <!-- 按鈕區域 - 左右並排 -->
          <div class="poster-buttons-container">
            <div class="ticket-button-container">
              <a href="ticketvisit.html" class="ticket-button">
                票券＆參觀 VISIT&TICKETS
              </a>
            </div>
            <div class="flip-button-container">
              <a href="ticketvisit.html" style="text-decoration: none;">
              <button class="flip-button">
                <span class="flip-text" >👆</span>
              </button>
              </a>
            </div>
          </div>
          
          <!-- 按鈕功能說明文字 -->
          <div class="button-explanation">
            <div class="explanation-text" style="color:rgb(60,60,60)">     
              左側的按鈕可供您購買票券，並同時了解展覽的開放時間地點、票價資訊、參展名單、完整節目表、展覽常見問及參觀須知；右側的按鈕則能讓您翻轉海報，查看背面的快速資訊。
              The button on the left allows you to purchase tickets and learn more about visiting information, including opening hours, ticket prices, and visitor guidelines. The button on the right lets you flip the poster to view the back side, revealing additional details.
            </div>
          </div>
          
          <!-- start of poster-section -->
          <section class="poster-section" id="Poster">
            <div class="poster-container" data-flipped="false">
              <div class="poster-card">
                <div class="poster-front">
                  <img class="poster" src="image/25TPABF_poster_RGB.png" />
                </div>
                <div class="poster-back">
                  <img class="poster" src="image/25TPABF_poster_RGB-2.png" />
                </div>
              </div>
            </div>
          </section>
          <!-- 右側 Zine 區域 - 在 poster 控制區下方 -->
          <div class="right-zine-container">
            <div class="store-explanation">
              ↓ 懸停查看詳情，點擊進入商店 Hover for details, click to enter store.
            </div>
            <div class="right-zine-item"></div>
            <div class="right-zine-item"></div>
          </div>
        </div>
        <!-- end of poster-area -->

        <!-- 中間 Zine 區域 - 在 poster 和 calender 之間 -->
        <div class="middle-zine-container">
          <div class="middle-zine-items-wrapper">
            <div class="middle-zine-item"></div>
            <div class="middle-zine-item"></div>
            <div class="middle-zine-item"></div>
            <div class="middle-zine-item"></div>
            <div class="right-zine-item"></div>
            <div class="middle-zine-item"></div>
          </div>
        </div>

        <!-- 活動圖片輪播區域 - 手機版專用 -->
        <section class="event-gallery-section" id="eventGallery">
          <hr class="event-gallery-divider">
          <div class="event-gallery-container">
            <div class="event-gallery-slider">
              <div class="image-strip">
                <img src="image/horizental/hori1.jpg" alt="Event 1" />
                <img src="image/horizental/hori2.jpg" alt="Event 2" />
                <img src="image/horizental/hori3.jpg" alt="Event 3" />
                <img src="image/horizental/hori4.jpg" alt="Event 4" />
                <img src="image/horizental/hori5.jpg" alt="Event 5" />
                <img src="image/horizental/hori6.jpg" alt="Event 6" />
                <img src="image/horizental/hori7.jpg" alt="Event 7" />
                <img src="image/horizental/hori8.jpg" alt="Event 8" />
                <img src="image/horizental/hori9.jpg" alt="Event 9" />
                <img src="image/horizental/hori10.jpg" alt="Event 10" />
                <!-- 重複圖片以實現無縫循環 -->
                <img src="image/horizental/hori1.jpg" alt="Event 1" />
                <img src="image/horizental/hori2.jpg" alt="Event 2" />
                <img src="image/horizental/hori3.jpg" alt="Event 3" />
                <img src="image/horizental/hori4.jpg" alt="Event 4" />
                <img src="image/horizental/hori5.jpg" alt="Event 5" />
                <img src="image/horizental/hori6.jpg" alt="Event 6" />
              </div>
            </div>
          </div>
          <hr class="event-gallery-divider">
        </section>

        <!-- 條列模式區域 - 縮短寬度 -->
        <section class="calender-section card-section" id="calender">
          <h3>
            Upcoming Events
          </h3>
          <div class="timeline-subscribe">
            <p class="agenda-subscribe">
              <a
                href="https://calendar.google.com/calendar/u/2?cid=OTA1MjdmNjdmYTQ2MmM4M2UxODRiMGM2MmRlZjEwZWJjOGIwMGNjOGM2N2E1YjgzYWYyYWZiOTBhMWJkYjI5M0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t"
                >\Suscribe to TPABF's calendar/</a
              >
            </p>
          </div>

          <!-- Event Type 篩選器 -->
          <div class="event-filter-header">
            <div class="event-filter">
              <label for="eventTypeFilter">Event Type:</label>
              <select id="eventTypeFilter" class="event-type-select">
                <option value="all">All Events</option>
                <option value="talk">Talk</option>
                <option value="workshop">Workshop</option>
                <option value="performance">Performance</option>
              </select>
            </div>
          </div>

          <!-- 卡片模式內容 -->
          <div class="calender-content">
            <!-- 隱藏的卡片模式容器，為了兼容 JavaScript -->
            <div
              class="calender-mode-container card-mode"
              id="cardModeContainer"
            >
              <div class="calender-scroll-container" id="calenderScroll">
                <div id="eventsTimeline" class="events-timeline">
                  <!-- 日曆事件將由 calender.js 動態生成 -->
                </div>
              </div>
            </div>
          </div>

          <!-- 隱藏的模式切換按鈕，為了兼容 JavaScript -->
          <div style="display: none">
            <button id="cardMode" class="mode-btn active"></button>
            <button id="timelineMode" class="mode-btn"></button>
          </div>
        </section>

        <!-- 第二個活動圖片輪播區域 - 手機版專用 -->
        <section class="event-gallery-section event-gallery-section-2" id="eventGallery2">
          <hr class="event-gallery-divider">
          <div class="event-gallery-container">
            <div class="event-gallery-slider">
              <div class="image-strip">
                <img src="image/horizental/hori11.jpg" alt="Event 11" />
                <img src="image/horizental/hori12.jpg" alt="Event 12" />
                <img src="image/horizental/hori13.jpg" alt="Event 13" />
                <img src="image/horizental/hori14.jpg" alt="Event 14" />
                <img src="image/horizental/hori15.jpg" alt="Event 15" />
                <img src="image/horizental/hori16.jpg" alt="Event 16" />
                <img src="image/horizental/hori17.jpg" alt="Event 17" />
                <img src="image/horizental/hori18.jpg" alt="Event 18" />
                <img src="image/horizental/hori19.jpg" alt="Event 19" />
                <img src="image/horizental/hori20.jpg" alt="Event 20" />
                <!-- 重複圖片以實現無縫循環 -->
                <img src="image/horizental/hori11.jpg" alt="Event 11" />
                <img src="image/horizental/hori12.jpg" alt="Event 12" />
                <img src="image/horizental/hori13.jpg" alt="Event 13" />
                <img src="image/horizental/hori14.jpg" alt="Event 14" />
                <img src="image/horizental/hori15.jpg" alt="Event 15" />
                <img src="image/horizental/hori16.jpg" alt="Event 16" />
              </div>
            </div>
          </div>
          <hr class="event-gallery-divider">
        </section>
        </div>
        <!-- end of top-content-wrapper -->

        <!-- Newsletter Sign Up 區域 - 在PROGRAMS下方 -->
        <section class="newsletter-section" id="newsletter">
          <h3>NEWSLETTER</h3>
          
          <!-- Newsletter 功能說明文字 -->
          <div class="newsletter-explanation">
            <div class="explanation-text">     
              訂閱我們的電子報，獲取最新展覽資訊、近期活動消息和各種新書新刊新產品的各種消息。
              Subscribe to our newsletter for the latest exhibition updates, event news, and new books, magazines, and products.
            </div>
          </div>
          
          <div class="newsletter-content">
            <div id="mc_embed_signup">
              <form action="https://taipeiartbookfair.us1.list-manage.com/subscribe/post?u=d8c7b3dc8532a4323466edd2d&amp;id=ca8c067b40&amp;f_id=009678e2f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate newsletter-form" target="_self" novalidate="">
                <div id="mc_embed_signup_scroll">
                  <div class="indicates-required" style="display: none;"><span class="asterisk">*</span> indicates required</div>
                  <div class="form-group">
                    <label for="mce-EMAIL" style="display: none;">Email Address <span class="asterisk">*</span></label>
                    <input 
                      type="email" 
                      name="EMAIL" 
                      class="required email" 
                      id="mce-EMAIL" 
                      required 
                      value=""
                      placeholder="your@email.com"
                    >
                  </div>
                  <div id="mce-responses" class="clear foot">
                    <div class="response" id="mce-error-response" style="display: none;"></div>
                    <div class="response" id="mce-success-response" style="display: none;"></div>
                  </div>
                  <div style="position: absolute; left: -5000px;" aria-hidden="true">
                    <input type="text" name="b_d8c7b3dc8532a4323466edd2d_ca8c067b40" tabindex="-1" value="">
                  </div>
                  <div class="optionalParent">
                    <div class="clear foot">
                      <input type="submit" name="subscribe" id="mc-embedded-subscribe" class="button newsletter-submit-btn" value="SUBSCRIBE">
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </section>
      </div>
      <!-- end of main-content -->
    </div>
    <!-- end of monopoly-board -->


    <!-- 滾動橫幅 -->
    <div class="banner">
      <div class="banner-track">
        <div class="banner-content">
          <span class="dot"></span> 2025 草率季 TPABF
          徵件結果已公布，請有報名的單位登入攤商系統查詢。 
          <span class="dot"></span> The selection results for the 2025 TPABF are
          now available. Please log in to the exhibitor system to check your
          application status. 
          <span class="dot" style="background-color: blueviolet"></span>
          請持續關注我們的社群平台，掌握最新活動消息。Follow us on social media
          for the latest updates.
          <span class="dot"></span> 2025 草率季 TPABF
          徵件結果已公布，請有報名的單位登入攤商系統查詢。 
          <span class="dot"></span> The selection results for the 2025 TPABF are
          now available. Please log in to the exhibitor system to check your
          application status. 
          <span class="dot" style="background-color: blueviolet"></span>
          請持續關注我們的社群平台，掌握最新活動消息。Follow us on social media
          for the latest updates.
        </div>
        <div class="banner-content">
          <span class="dot"></span> 2025 草率季 TPABF
          徵件結果已公布，請有報名的單位登入攤商系統查詢。 
          <span class="dot"></span> The selection results for the 2025 TPABF are
          now available. Please log in to the exhibitor system to check your
          application status. 
          <span class="dot" style="background-color: blueviolet"></span>
          請持續關注我們的社群平台，掌握最新活動消息。Follow us on social media
          for the latest updates.
          <span class="dot"></span> 2025 草率季 TPABF
          徵件結果已公布，請有報名的單位登入攤商系統查詢。 
          <span class="dot"></span> The selection results for the 2025 TPABF are
          now available. Please log in to the exhibitor system to check your
          application status. 
          <span class="dot" style="background-color: blueviolet"></span>
          請持續關注我們的社群平台，掌握最新活動消息。Follow us on social media
          for the latest updates.
          <span class="dot"></span> 2025 草率季 TPABF
          徵件結果已公布，請有報名的單位登入攤商系統查詢。 
          <span class="dot"></span> The selection results for the 2025 TPABF are
          now available. Please log in to the exhibitor system to check your
          application status. 
          <span class="dot" style="background-color: blueviolet"></span>
          請持續關注我們的社群平台，掌握最新活動消息。Follow us on social media
          for the latest updates.
          <span class="dot"></span> 2025 草率季 TPABF
          徵件結果已公布，請有報名的單位登入攤商系統查詢。 
          <span class="dot"></span> The selection results for the 2025 TPABF are
          now available. Please log in to the exhibitor system to check your
          application status. 
          <span class="dot" style="background-color: blueviolet"></span>
          請持續關注我們的社群平台，掌握最新活動消息。Follow us on social media
          for the latest updates.
        </div>
      </div>
    </div>

    <!-- 頁腳 -->
    <footer class="footer">
      <div class="footer-content">
        <!-- <div class="footer-left">
        </div> -->
        <div class="footer-right">
          <a href="https://www.facebook.com/taipeiartbookfair/" class="social-link">FACEBOOK</a>
          <a href="https://www.instagram.com/taipeiartbookfair/" class="social-link">INSTAGRAM</a>
          <a href="#" id="footerCredits" class="footer-link">CREDITS</a>
        </div>
      </div>
    </footer>

    <!-- Credit Drop-up -->
    <div class="credit-dropup-container" aria-live="polite">
      <div class="credit-panel" id="creditPanel" role="dialog" aria-modal="false" aria-labelledby="creditTitle">
        <h3 id="creditTitle">CREDITS · COLOPHON</h3>
        <p>
          This site is coded with love and a bit of roughness. Built with vanilla HTML/CSS/JS, no heavy frameworks.
        </p>
        <p><strong>Open-source fonts in use</strong>:</p>
        <ul>
          <li>Inclusive Sans (Google Fonts)</li>
          <li>BioRhyme Expanded (Google Fonts)</li>
          <li>Libre Franklin (Google Fonts)</li>
          <li>Montserrat (Google Fonts)</li>
        </ul>
        <p>
          Images, zine mockups and timeline UI are custom-built for Taipei Art Book Fair. Code is intentionally modular with styles centralized for easier maintenance.
        </p>
      </div>
    </div>

    <script>
      // Newsletter 彈出視窗功能
      const newsletterPopup = document.getElementById("newsletterPopup");
      const closeNewsletter = document.getElementById("closeNewsletter");

      // 語言切換器功能
      const languageToggle = document.getElementById("language-toggle");
      let currentLanguage = "zh"; // 預設中文

      // 根據當前語言設置按鈕文字
      function updateLanguageButton() {
        if (currentLanguage === "zh") {
          // 當前是中文，顯示 English 按鈕
          languageToggle.textContent = "English";
        } else {
          // 當前是英文，顯示中文按鈕
          languageToggle.textContent = "中文";
        }
      }

      // 點擊切換按鈕
      languageToggle.addEventListener("click", () => {
        if (currentLanguage === "zh") {
          currentLanguage = "en";
          // 調用 duolanguage.js 的更新功能
          if (typeof updateText === "function") {
            updateText("en");
          }
          console.log("切換到英文");
        } else {
          currentLanguage = "zh";
          // 調用 duolanguage.js 的更新功能
          if (typeof updateText === "function") {
            updateText("zh");
          }
          console.log("切換到中文");
        }
        updateLanguageButton();
      });

      // 監聽語言變化事件
      window.addEventListener("languageChanged", function (event) {
        currentLanguage = event.detail.language;
        updateLanguageButton();
      });

      // 初始化按鈕文字
      updateLanguageButton();

      // Custom form submission handling for Mailchimp newsletter
      document.addEventListener('DOMContentLoaded', function() {
        const newsletterForm = document.getElementById("mc-embedded-subscribe-form");
        if (newsletterForm) {
          newsletterForm.addEventListener("submit", function (e) {
            const email = document.getElementById("mce-EMAIL");
            if (!email) return;
            
            const emailValue = email.value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (!emailValue) {
              e.preventDefault();
              showMessage("error", "請輸入您的電子郵件地址");
              return false;
            }

            if (!emailRegex.test(emailValue)) {
              e.preventDefault();
              showMessage("error", "請輸入有效的電子郵件地址");
              return false;
            }

            // Show loading state and let the form submit naturally to Mailchimp
            const submitBtn = document.getElementById("mc-embedded-subscribe");
            if (submitBtn) {
              const originalText = submitBtn.value;
              submitBtn.value = "SUBSCRIBING...";
              submitBtn.disabled = true;

              // Clear the form and show success message after a brief delay
              setTimeout(() => {
                submitBtn.value = originalText;
                submitBtn.disabled = false;
                email.value = "";
                showMessage(
                  "success",
                  "感謝您的訂閱！請檢查您的電子郵件以確認訂閱。"
                );
              }, 2000);
            }

            // Allow the form to submit naturally to Mailchimp
            return true;
          });

          function showMessage(type, message) {
            const errorDiv = document.getElementById("mce-error-response");
            const successDiv = document.getElementById("mce-success-response");

            if (!errorDiv || !successDiv) return;

            // Hide both first
            errorDiv.style.display = "none";
            successDiv.style.display = "none";

            if (type === "error") {
              errorDiv.innerHTML = message;
              errorDiv.style.display = "block";
              setTimeout(() => (errorDiv.style.display = "none"), 5000);
            } else {
              successDiv.innerHTML = message;
              successDiv.style.display = "block";
              setTimeout(() => (successDiv.style.display = "none"), 5000);
            }
          }
        }
      });
    </script>
    <script src="js/poster-flip.js"></script>
    <script src="js/calender.js"></script>
    <script src="js/duolanguage.js"></script>
    <script src="js/mainpage_image_rotata.js"></script>
    <script src="js/homepage-zine.js"></script>
    
    <script>
      // Credit drop-up toggle using existing footer CREDITS link
      (function(){
        const trigger = document.getElementById('footerCredits');
        const panel = document.getElementById('creditPanel');
        if (!trigger || !panel) return;
        trigger.addEventListener('click', function(e){
          e.preventDefault();
          const isOpen = panel.classList.toggle('open');
          trigger.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
          trigger.setAttribute('aria-controls', 'creditPanel');
        });
        // click outside to close
        document.addEventListener('click', function(e){
          if (!panel.contains(e.target) && e.target !== trigger) {
            panel.classList.remove('open');
            trigger.setAttribute('aria-expanded', 'false');
          }
        });
      })();
    </script>

    <script>
      (function() {
        const hero = document.querySelector('.hero-section');
        const newspaper = document.querySelector('#newspaper');
        const zineRow = document.querySelector('#zine-row'); // 如果需要保險間距，可加上
      
        function layoutHeroToNewspaper(gap = 16) {
          if (!hero || !newspaper) return;
          const heroTop = hero.offsetTop;
          const newspaperTop = newspaper.offsetTop;
          const height = Math.max(0, newspaperTop - heroTop - gap);
          hero.style.height = height + 'px';
        }
      
        let rafId;
        function onResize() {
          cancelAnimationFrame(rafId);
          rafId = requestAnimationFrame(() => layoutHeroToNewspaper(16));
        }
      
        window.addEventListener('load', onResize);
        window.addEventListener('resize', onResize);
        // 若有 webfont/圖片載入影響排版，再多觸發一次
        document.fonts && document.fonts.ready.then(onResize);
      })();
      </script>


    <!-- Store Modal JavaScript -->
    <script>
      // Wait for DOM to be loaded
      document.addEventListener('DOMContentLoaded', function() {
        const modal = document.getElementById('storeModal');
        const closeBtn = document.querySelector('.store-modal-close');
        const modalContent = document.querySelector('.store-modal-content');
        const storeButton = document.querySelector('.store-modal-image');
        
        // Show modal immediately when page loads
        modal.style.display = 'block';
        
        // Store URL
        const storeUrl = 'https://nmhw.taipeiartbookfair.com';
        
        // Close modal function
        function closeModal() {
          modal.style.display = 'none';
        }
        
        // Close button click
        closeBtn.addEventListener('click', function(e) {
          e.stopPropagation(); // Prevent triggering modal click
          closeModal();
        });
        
        // Close modal when clicking outside
        modal.addEventListener('click', function(e) {
          if (e.target === modal) {
            closeModal();
          }
        });
        
        // Open store when clicking modal content or store button
        function openStore() {
          const newWindow = window.open(storeUrl, '_blank', 'noopener,noreferrer');
          if (!newWindow) {
            // If popup blocked, show alert instead of redirecting
            alert('請允許彈出視窗以開啟商店頁面，或手動前往: ' + storeUrl);
          }
        }
        
        // Modal content click (area around close button)
        modalContent.addEventListener('click', function(e) {
          // Don't trigger if clicking close button
          if (!e.target.classList.contains('store-modal-close')) {
            e.preventDefault();
            e.stopPropagation();
            openStore();
          }
        });
        
        // Store button click
        storeButton.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          openStore();
        });
        
        // ESC key to close
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && modal.style.display === 'block') {
            closeModal();
          }
        });
      });
    </script>

    <!-- 關閉主要內容容器 -->
    </div>
  </body>
</html>
